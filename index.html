<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Billiard Pro - Dual Table Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@400;600;800&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a;
            background-image: radial-gradient(circle at top right, #1e293b, #0f172a);
        }
        .font-digital { font-family: 'Orbitron', sans-serif; }
        .glass-card {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .table-active { border-top: 4px solid #fbbf24; }
    </style>
</head>
<body class="text-slate-100 min-h-screen">

    <nav class="bg-black/50 border-b border-white/10 p-4 sticky top-0 z-50 backdrop-blur-md">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-xl font-black font-digital text-yellow-500 tracking-widest">ðŸŽ± BILLIARD<span class="text-white text-sm">DUAL-TABLE</span></h1>
            <button onclick="clearDatabase()" class="bg-rose-900/50 hover:bg-rose-800 px-4 py-1.5 rounded-full text-xs font-bold border border-rose-500/30">RESET ALL</button>
        </div>
    </nav>

    <div class="container mx-auto p-4 lg:p-6">
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">
            
            <div class="lg:col-span-3 space-y-4">
                <section class="glass-card p-5 rounded-2xl shadow-xl">
                    <h3 class="text-sm font-bold mb-4 text-yellow-500 uppercase tracking-widest">Input Pemain</h3>
                    <div class="space-y-2">
                        <input type="text" id="playerName" placeholder="Nama..." class="w-full p-2 bg-slate-900/50 border border-slate-700 rounded-lg outline-none focus:border-yellow-500">
                        <select id="playerGrade" class="w-full p-2 bg-slate-900/50 border border-slate-700 rounded-lg text-yellow-500 font-bold">
                            <option>G4</option><option>G5</option><option>G6</option><option>G7</option>
                        </select>
                        <button onclick="registerPlayer()" class="w-full bg-yellow-500 hover:bg-yellow-400 text-black py-2 rounded-lg font-bold transition-all">DAFTARKAN</button>
                    </div>
                </section>

                <section class="glass-card p-5 rounded-2xl shadow-xl">
                    <button onclick="randomizeDualMatch()" class="w-full bg-indigo-600 hover:bg-indigo-500 py-3 rounded-xl font-bold flex items-center justify-center gap-2 mb-4">
                        ðŸŽ² ACAK 2 MEJA
                    </button>
                    <div id="playerList" class="space-y-2 max-h-[300px] overflow-y-auto text-xs"></div>
                </section>
            </div>

            <div class="lg:col-span-9 space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    
                    <div class="glass-card rounded-3xl p-6 table-active shadow-2xl">
                        <div class="flex justify-between items-center mb-4">
                            <span class="bg-yellow-500 text-black px-3 py-0.5 rounded-full text-[10px] font-black">MEJA 1</span>
                            <span class="text-[10px] text-slate-500 font-digital">LIVE SCORER</span>
                        </div>
                        <div class="flex justify-between items-center gap-2 mb-6 text-center">
                            <div class="flex-1">
                                <p id="t1p1Name" class="text-[10px] text-blue-400 font-bold uppercase truncate">PLAYER 1</p>
                                <div id="t1s1" class="text-6xl font-digital font-black my-2">0</div>
                                <button onclick="score('t1s1', 1)" class="w-full bg-blue-600 py-2 rounded-lg text-xs font-bold">+ FRAME</button>
                            </div>
                            <div class="text-xl font-black text-slate-700 italic">VS</div>
                            <div class="flex-1">
                                <p id="t1p2Name" class="text-[10px] text-rose-400 font-bold uppercase truncate">PLAYER 2</p>
                                <div id="t1s2" class="text-6xl font-digital font-black my-2">0</div>
                                <button onclick="score('t1s2', 1)" class="w-full bg-rose-600 py-2 rounded-lg text-xs font-bold">+ FRAME</button>
                            </div>
                        </div>
                        <button onclick="finishMatch(1)" class="w-full bg-emerald-700 hover:bg-emerald-600 py-2 rounded-xl font-bold text-xs">SIMPAN MEJA 1</button>
                    </div>

                    <div class="glass-card rounded-3xl p-6 table-active shadow-2xl">
                        <div class="flex justify-between items-center mb-4">
                            <span class="bg-yellow-500 text-black px-3 py-0.5 rounded-full text-[10px] font-black">MEJA 2</span>
                            <span class="text-[10px] text-slate-500 font-digital">LIVE SCORER</span>
                        </div>
                        <div class="flex justify-between items-center gap-2 mb-6 text-center">
                            <div class="flex-1">
                                <p id="t2p1Name" class="text-[10px] text-blue-400 font-bold uppercase truncate">PLAYER 1</p>
                                <div id="t2s1" class="text-6xl font-digital font-black my-2">0</div>
                                <button onclick="score('t2s1', 1)" class="w-full bg-blue-600 py-2 rounded-lg text-xs font-bold">+ FRAME</button>
                            </div>
                            <div class="text-xl font-black text-slate-700 italic">VS</div>
                            <div class="flex-1">
                                <p id="t2p2Name" class="text-[10px] text-rose-400 font-bold uppercase truncate">PLAYER 2</p>
                                <div id="t2s2" class="text-6xl font-digital font-black my-2">0</div>
                                <button onclick="score('t2s2', 1)" class="w-full bg-rose-600 py-2 rounded-lg text-xs font-bold">+ FRAME</button>
                            </div>
                        </div>
                        <button onclick="finishMatch(2)" class="w-full bg-emerald-700 hover:bg-emerald-600 py-2 rounded-xl font-bold text-xs">SIMPAN MEJA 2</button>
                    </div>

                </div>

                <section class="glass-card rounded-2xl overflow-hidden">
                    <div class="p-3 bg-white/5 text-xs font-bold text-yellow-500 tracking-widest">RANKING KLASEMEN</div>
                    <div class="overflow-x-auto">
                        <table class="w-full text-left text-xs">
                            <thead class="bg-slate-900 uppercase text-slate-500">
                                <tr>
                                    <th class="p-3">POS</th>
                                    <th class="p-3">NAMA</th>
                                    <th class="p-3 text-center">W</th>
                                    <th class="p-3 text-center">L</th>
                                    <th class="p-3 text-center">PTS</th>
                                </tr>
                            </thead>
                            <tbody id="leagueTableBody" class="divide-y divide-white/5"></tbody>
                        </table>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <script>
        let players = [];
        let matchLogs = [];

        window.onload = function() {
            const p = localStorage.getItem('bill_players_dual');
            if(p) players = JSON.parse(p);
            renderAll();
        };

        function save() { localStorage.setItem('bill_players_dual', JSON.stringify(players)); }

        function registerPlayer() {
            const n = document.getElementById('playerName');
            const g = document.getElementById('playerGrade');
            if(!n.value) return;
            players.push({ name: n.value, grade: g.value, w:0, l:0, pts:0 });
            n.value = ""; renderAll(); save();
        }

        function randomizeDualMatch() {
            if (players.length < 4) return alert("Butuh minimal 4 pemain untuk 2 meja!");
            let shuf = [...players].sort(() => 0.5 - Math.random());
            
            // Meja 1
            document.getElementById('t1p1Name').innerText = `${shuf[0].name} (${shuf[0].grade})`;
            document.getElementById('t1p2Name').innerText = `${shuf[1].name} (${shuf[1].grade})`;
            // Meja 2
            document.getElementById('t2p1Name').innerText = `${shuf[2].name} (${shuf[2].grade})`;
            document.getElementById('t2p2Name').innerText = `${shuf[3].name} (${shuf[3].grade})`;
            
            // Reset Score UI
            ['t1s1','t1s2','t2s1','t2s2'].forEach(id => document.getElementById(id).innerText = "0");
        }

        function score(id, val) {
            const el = document.getElementById(id);
            el.innerText = parseInt(el.innerText) + val;
        }

        function finishMatch(tableNum) {
            const s1 = parseInt(document.getElementById(`t${tableNum}s1`).innerText);
            const s2 = parseInt(document.getElementById(`t${tableNum}s2`).innerText);
            const n1 = document.getElementById(`t${tableNum}p1Name`).innerText.split(' (')[0];
            const n2 = document.getElementById(`t${tableNum}p2Name`).innerText.split(' (')[0];

            if(n1 === "PLAYER 1") return;

            let p1 = players.find(p => p.name === n1);
            let p2 = players.find(p => p.name === n2);

            if(s1 > s2) { p1.w++; p1.pts += 3; p2.l++; }
            else if(s2 > s1) { p2.w++; p2.pts += 3; p1.l++; }

            renderAll(); save();
            alert(`Meja ${tableNum} Berhasil Disimpan!`);
        }

        function renderAll() {
            const pl = document.getElementById('playerList');
            pl.innerHTML = players.map(p => `
                <div class="bg-slate-900/50 p-2 rounded-lg border border-white/5 flex justify-between">
                    <span>${p.name} <small class="text-blue-500">${p.grade}</small></span>
                    <span class="text-yellow-500 font-bold">${p.pts} Pts</span>
                </div>
            `).join('');

            const sorted = [...players].sort((a,b) => b.pts - a.pts);
            document.getElementById('leagueTableBody').innerHTML = sorted.map((p,i) => `
                <tr class="hover:bg-white/5">
                    <td class="p-3 text-yellow-500 font-bold">${i+1}</td>
                    <td class="p-3 font-bold">${p.name} <small class="text-slate-500">${p.grade}</small></td>
                    <td class="p-3 text-center text-emerald-400 font-bold">${p.w}</td>
                    <td class="p-3 text-center text-rose-400 font-bold">${p.l}</td>
                    <td class="p-3 text-center font-black text-yellow-500">${p.pts}</td>
                </tr>
            `).join('');
        }

        function clearDatabase() {
            if(confirm("Hapus semua data?")) { localStorage.clear(); location.reload(); }
        }
    </script>
</body>
</html>
